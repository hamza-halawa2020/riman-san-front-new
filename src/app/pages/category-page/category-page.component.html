<div [dir]="translateService.currentLang === 'ar' ? 'rtl' : 'ltr'">
    <app-navbar />
    <app-page-banner />

    <!-- Start product Area -->
    <section id="product_area" class="mt-5">
        <div class="container">
            <div class="section-title position-relative">
                <div class="d-flex align-items-center justify-content-between">
                    <!-- Grid View Options -->
                    <div class="grid-view-options">
                        <!-- 1 Column (Mobile Only) -->
                        <button
                            class="btn btn-outline-secondary d-block d-md-none"
                            [ngClass]="{ active: gridColumns === 1 }"
                            (click)="setGridColumns(1)"
                            title="1 Column"
                        >
                            <span class="custom-grid-icon grid-1">
                                <svg
                                    width="15"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <rect width="24" height="24" fill="white" />
                                    <rect
                                        x="1"
                                        y="3"
                                        width="22"
                                        height="18"
                                        fill="#09244B"
                                    />
                                </svg>
                            </span>
                        </button>

                        <!-- 2 Columns -->
                        <button
                            class="btn btn-outline-secondary"
                            [ngClass]="{ active: gridColumns === 2 }"
                            (click)="setGridColumns(2)"
                            title="2 Columns"
                        >
                            <span class="custom-grid-icon">
                                <svg
                                    width="20"
                                    height="24"
                                    viewBox="-3 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <rect width="24" height="24" fill="white" />
                                    <rect
                                        x="1"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="10"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                </svg>
                            </span>
                        </button>

                        <!-- 3 Columns -->
                        <button
                            class="btn btn-outline-secondary"
                            [ngClass]="{ active: gridColumns === 3 }"
                            (click)="setGridColumns(3)"
                            title="3 Columns"
                        >
                            <span class="custom-grid-icon">
                                <svg
                                    width="30"
                                    height="24"
                                    viewBox="3 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <rect width="24" height="24" fill="white" />
                                    <rect
                                        x="1"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="10"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="20"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                </svg>
                            </span>
                        </button>

                        <!-- 4 Columns (Hidden on Mobile) -->
                        <button
                            class="btn btn-outline-secondary d-none d-md-inline-block"
                            [ngClass]="{ active: gridColumns === 4 }"
                            (click)="setGridColumns(4)"
                            title="4 Columns"
                        >
                            <span class="custom-grid-icon">
                                <svg
                                    width="40"
                                    height="24"
                                    viewBox="7 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <rect width="24" height="24" fill="white" />
                                    <rect
                                        x="1"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="10"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="20"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="30"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                </svg>
                            </span>
                        </button>

                        <!-- 6 Columns (Hidden on Mobile) -->
                        <button
                            class="btn btn-outline-secondary d-none d-md-inline-block"
                            [ngClass]="{ active: gridColumns === 6 }"
                            (click)="setGridColumns(6)"
                            title="6 Columns"
                        >
                            <span class="custom-grid-icon">
                                <svg
                                    width="60"
                                    height="24"
                                    viewBox="17 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <rect width="24" height="24" fill="white" />
                                    <rect
                                        x="1"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="10"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="20"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="30"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="40"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                    <rect
                                        x="50"
                                        y="3"
                                        width="7"
                                        height="18"
                                        fill="#09244B"
                                    />
                                </svg>
                            </span>
                        </button>
                    </div>

                    <!-- Sorting Filter -->
                    <div class="w-25">
                        <label for="sortSelect">{{ "SORT_BY" | translate }}</label>
                        <select
                            class="form-control"
                            id="sortSelect"
                            (change)="sortCategorys($any($event.target).value)"
                        >
                            <option value="a_to_z">{{ "ALPHA_A_TO_Z" | translate }}</option>
                            <option value="z_to_a">{{ "ALPHA_Z_TO_A" | translate }}</option>
                            <option value="price_low_to_high">{{ "PRICE_LOW_TO_HIGH" | translate }}</option>
                            <option value="price_high_to_low">{{ "PRICE_HIGH_TO_LOW" | translate }}</option>
                            <option value="date_old_to_new">{{ "DATE_OLD_TO_NEW" | translate }}</option>
                            <option value="date_new_to_old">{{ "DATE_NEW_TO_OLD" | translate }}</option>
                        </select>
                    </div>
                </div>
            </div>
            <!-- Success Message as a Toast -->
            <div
                *ngIf="successMessage"
                class="toast-container position-fixed top-0"
                [class.start-0]="translateService.currentLang === 'ar'"
                [class.end-0]="translateService.currentLang !== 'ar'"
                p-3
            >
                <div
                    class="toast show"
                    role="alert"
                    aria-live="assertive"
                    aria-atomic="true"
                >
                    <div class="toast-header">
                        <strong
                            [class.ms-auto]="translateService.currentLang === 'ar'"
                            [class.me-auto]="translateService.currentLang !== 'ar'"
                            class="text-success"
                        >
                            {{ "SUCCESS" | translate }}
                        </strong>
                    </div>
                    <div class="toast-body">
                        <h6>{{ successMessage }}</h6>
                    </div>
                </div>
            </div>

            <!-- Error Message as a Toast -->
            <div
                *ngIf="errorMessage"
                class="toast-container position-fixed top-0"
                [class.start-0]="translateService.currentLang === 'ar'"
                [class.end-0]="translateService.currentLang !== 'ar'"
                p-3
            >
                <div
                    class="toast show"
                    role="alert"
                    aria-live="assertive"
                    aria-atomic="true"
                >
                    <div class="toast-header">
                        <strong
                            [class.ms-auto]="translateService.currentLang === 'ar'"
                            [class.me-auto]="translateService.currentLang !== 'ar'"
                            class="text-danger"
                        >
                            {{ "ERROR" | translate }}
                        </strong>
                    </div>
                    <div class="toast-body">
                        <h6>{{ errorMessage }}</h6>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <div>
                    <div class="row">
                        <div [ngClass]="gridClass" *ngFor="let product of data">
                            <div class="product-grid">
                                <div class="product-image">
                                    <a routerLink="/product/{{ product.id }}">
                                        <img
                                            class="pic-1 imageClass"
                                            src="{{ image + product.productImages[0].image }}"
                                            alt="product image"
                                        />
                                    </a>
                                    <ul class="social" *ngIf="isLoggedIn">
                                        <li>
                                            <a
                                                style="cursor: pointer"
                                                (click)="addToFavourite(product.id)"
                                                [attr.data-tip]="'ADD_TO_WISHLIST' | translate"
                                            >
                                                <i class="fa-regular fa-heart"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a
                                                style="cursor: pointer"
                                                (click)="addToCart(product.id)"
                                                [attr.data-tip]="'ADD_TO_CART' | translate"
                                            >
                                                <i class="fa-solid fa-cart-plus"></i>
                                            </a>
                                        </li>
                                    </ul>
                                    <ul class="social" *ngIf="!isLoggedIn">
                                        <li>
                                            <a
                                                style="cursor: pointer"
                                                (click)="addToClientFavourite(product)"
                                                [attr.data-tip]="'ADD_TO_WISHLIST' | translate"
                                            >
                                                <i class="fa-regular fa-heart"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a
                                                style="cursor: pointer"
                                                (click)="addToClientCart(product)"
                                                [attr.data-tip]="'ADD_TO_CART' | translate"
                                            >
                                                <i class="fa-solid fa-cart-plus"></i>
                                            </a>
                                        </li>
                                    </ul>
                                    <span
                                        class="product-new-label"
                                        *ngIf="product.discount"
                                    >
                                        {{ "DISCOUNT" | translate }}: {{ product.discount }} {{ "EGP" | translate }}
                                    </span>
                                </div>
                                <div class="product-content">
                                    <h3 class="title">
                                        <a routerLink="/product/{{ product.id }}">
                                            {{ product.translatedName || product.title }}
                                        </a>
                                    </h3>
                                    <div class="price">
                                        {{ product.priceAfterDiscount }} {{ "EGP" | translate }}
                                        <span *ngIf="product.priceBeforeDiscount">
                                            {{ product.priceBeforeDiscount }} {{ "EGP" | translate }}
                                        </span>
                                    </div>
                                    <a
                                        *ngIf="isLoggedIn"
                                        class="add-to-cart"
                                        style="cursor: pointer"
                                        (click)="addToCart(product.id)"
                                    >
                                        {{ "ADD_TO_CART" | translate }}
                                    </a>
                                    <a
                                        *ngIf="!isLoggedIn"
                                        class="add-to-cart"
                                        style="cursor: pointer"
                                        (click)="addToClientCart(product)"
                                    >
                                        {{ "ADD_TO_CART" | translate }}
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- End Col -->
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End product Area -->

    <app-footer />
    <app-back-to-top />
</div>